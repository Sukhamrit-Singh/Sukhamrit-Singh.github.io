<!DOCTYPE html>
<html>
<head>
    <title>Project 1 - CS180</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            line-height: 1.8;
            color: #e0e0e0;
            background: #0a0a0a;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 60px 80px;
        }

        h1 {
            font-size: 2.5em;
            font-weight: 300;
            letter-spacing: -1px;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 1em;
            color: #808080;
            margin-bottom: 60px;
            font-weight: 400;
        }

        .author {
            color: #606060;
            margin: 10px 0;
            font-size: 1em;
        }

        h2 {
            color: #ffffff;
            font-size: 1.8em;
            font-weight: 300;
            margin: 80px 0 40px;
            letter-spacing: -0.5px;
        }

        h3 {
            color: #c0c0c0;
            font-size: 1.3em;
            font-weight: 300;
            margin: 40px 0 20px;
        }

        p {
            color: #a0a0a0;
            margin-bottom: 20px;
            line-height: 1.8;
        }

        ul, ol {
            color: #a0a0a0;
            margin-left: 30px;
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 8px;
        }

        code {
            background: #1a1a1a;
            color: #80ff80;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: inherit;
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .image-wrapper {
            margin-bottom: 20px;
        }

        .image-container {
            position: relative;
            overflow: hidden;
            background: #1a1a1a;
            border-radius: 4px;
            transition: transform 0.2s ease;
        }

        .image-container:hover {
            transform: scale(1.02);
        }

        .image-container img {
            width: 100%;
            height: auto;
            display: block;
            opacity: 0.9;
            transition: opacity 0.2s ease;
        }

        .image-container:hover img {
            opacity: 1;
        }

        .image-caption {
            color: #ffffff;
            font-size: 0.95em;
            margin-top: 10px;
            text-align: center;
        }

        .offset-info {
            font-size: 0.85em;
            color: #606060;
            margin-top: 4px;
            text-align: center;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 40px 0;
        }

        .comparison-item {
            text-align: center;
        }

        .comparison-item img {
            width: 100%;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .comparison-label {
            color: #808080;
            font-size: 0.9em;
        }

        .algorithm-box {
            background: #1a1a1a;
            border-left: 3px solid #404040;
            padding: 20px;
            margin: 30px 0;
            border-radius: 4px;
        }

        .highlight {
            background: #1a1a1a;
            border-left: 3px solid #ffff00;
            padding: 20px;
            margin: 30px 0;
            border-radius: 4px;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin: 40px 0;
        }

        .results-table th {
            background: #1a1a1a;
            color: #ffffff;
            padding: 12px;
            text-align: left;
            font-weight: 400;
        }

        .results-table td {
            padding: 10px;
            border-bottom: 1px solid #2a2a2a;
            color: #a0a0a0;
        }

        .results-table tr:hover {
            background: #151515;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #1a1a1a;
            border: 1px solid #404040;
            color: #808080;
            padding: 8px 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.2s ease;
            z-index: 1000;
            font-size: 14px;
        }
        
        .back-button:hover {
            background: #2a2a2a;
            color: #ffffff;
            border-color: #606060;
        }

        @media (max-width: 768px) {
            .container {
                padding: 40px;
            }
            
            .image-grid {
                grid-template-columns: 1fr;
            }
            
            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <a href="./index.html" class="back-button" title="Back to portfolio">
        <span style="font-size: 14px;">../</span>
    </a>
    
    <div class="container">
        <div style="margin-bottom: 60px;">
            <h1 style="margin-bottom: 20px;">proj1/</h1>
            <div style="margin-left: 40px;">
                <div style="margin: 8px 0;">
                    <a href="#overview" style="color: #808080; text-decoration: none; transition: color 0.2s ease;">
                        <span style="color: #404040;">├── </span>
                        <span style="color: #ffffff;">overview/</span>
                        <span style="color: #606060; margin-left: 8px;">Colorizing the Prokudin-Gorskii Photo Collection</span>
                    </a>
                </div>
                <div style="margin: 8px 0;">
                    <a href="#approach" style="color: #808080; text-decoration: none; transition: color 0.2s ease;">
                        <span style="color: #404040;">├── </span>
                        <span style="color: #ffffff;">approach/</span>
                        <span style="color: #606060; margin-left: 8px;">My Implementation Process</span>
                    </a>
                </div>
                <div style="margin: 8px 0;">
                    <a href="#results" style="color: #808080; text-decoration: none; transition: color 0.2s ease;">
                        <span style="color: #404040;">├── </span>
                        <span style="color: #ffffff;">results/</span>
                        <span style="color: #606060; margin-left: 8px;">Aligned Images Gallery</span>
                    </a>
                </div>
                <div style="margin: 8px 0;">
                    <a href="#additional" style="color: #808080; text-decoration: none; transition: color 0.2s ease;">
                        <span style="color: #404040;">├── </span>
                        <span style="color: #ffffff;">additional/</span>
                        <span style="color: #606060; margin-left: 8px;">Extra Examples from the Collection</span>
                    </a>
                </div>
                <div style="margin: 8px 0;">
                    <a href="#summary" style="color: #808080; text-decoration: none; transition: color 0.2s ease;">
                        <span style="color: #404040;">└── </span>
                        <span style="color: #ffffff;">summary/</span>
                        <span style="color: #606060; margin-left: 8px;">Results Table & Conclusions</span>
                    </a>
                </div>
            </div>
        </div>

        <h1 style="font-size: 2.5em; margin-bottom: 10px;">Images of the Russian Empire</h1>
        <div style="color: #808080; margin-bottom: 40px; font-size: 1em;">Colorizing the Prokudin-Gorskii Photo Collection</div>

        <h2 id="overview">Overview</h2>
        <p>
            Sergei Mikhailovich Prokudin-Gorskii was a photographer who captured the Russian Empire in color 
            decades before color photography became widespread. His technique involved taking three separate 
            exposures through red, green, and blue filters on glass plates. This project implements an algorithm 
            to automatically align these images using metrics such as Euclidian Distance or Normalized Cross-Correlation, 
            and then combine these three channel images into full-color photographs, displaying the vibrant images 
            that were taken nearly a century ago.
        </p>

        <h2 id="approach">My Approach</h2>
        
        <h3>Initial Implementation: Low-Resolution Images</h3>
        <p>
            Initially, I started off with designing a bare-bones approach to work on the lower-resolution images. 
            This involved exhaustively searching over a window of -15 to 15 pixels and using the standard Euclidian 
            Distance metric for alignment. After calculating optimal Euclidian Distances, I used <code>np.roll</code> 
            to align the images using the optimal shifts we detected.
        </p>
        
        <h3>Problem 1: Border Artifacts</h3>
        <p>
            However, it was noticed that the images were still not properly aligning, and I believe that was due to 
            the border frame on the original .tif and .jpg files. To get around this, I cropped images by 10% first 
            to get rid of the frame, and then performed necessary operations. With this, the low-resolution images worked.
        </p>
        <div class="comparison">
            <div class="comparison-item">
                <img src="proj1/unoptimal2.png" alt="Uncropped Example 1">
                <div class="comparison-label">Uncropped Example 1</div>
            </div>
            <div class="comparison-item">
                <img src="proj1/unoptimal3.png" alt="Uncropped Example 2">
                <div class="comparison-label">Uncropped Example 2</div>
            </div>
        </div>

        <h3>Problem 2: The Emir Challenge</h3>
        <p>
            However, this solution did not solve the problem of aligning the BGR images of Emir. Note that in the case 
            like the Emir of Bukhara, the images to be matched do not actually have the same brightness values (they are 
            different color channels).
        </p>
        <p>
            To solve this, I switched my alignment metric from Euclidian Distance to NCC, which ended up working much 
            better for alignment. In addition to this, I finetuned some of the cropping and search window values. I 
            changed the cropping to crop images from 10% to 15%, and defined the search window such that if the algorithm 
            is currently at the highest point of the image pyramid, have a search window of -30 to 30 pixels. Else, have it 
            as 2 pixels. This will allow the first search to be more exhaustive, and there after, be shorter and more optimized. 
            After these results, we can see the Emir image nearly aligned, but not perfectly.

            To completely align the image, I used an edge-detection algorithm (Sobel) on each BGR image, and then ran the alignment 
            algorithm on these images. The results were then applied on all images, and the alignments worked great.
        </p>
        <div class="comparison">
            <div class="comparison-item">
                <img src="proj1/emir_wrong.png" alt="Emir with pixel-based alignment">
                <div class="comparison-label">Pre-Sobel (main assignment)</div>
            </div>
            <div class="comparison-item">
                <img src="proj1/emir.jpeg" alt="Emir with edge-based alignment">
                <div class="comparison-label">Post-Sobel (bells and whistles)</div>
            </div>
        </div>

        <h2 id="results">Results</h2>
        
        <h3>Low-Resolution Images</h3>
        <div class="image-grid">
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/cathedral.jpeg" alt="Cathedral">
                </div>
                <div class="image-caption">Cathedral</div>
                <div class="offset-info">G: (5, 2) | R: (12, 3)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/monastery.jpeg" alt="Monastery">
                </div>
                <div class="image-caption">Monastery</div>
                <div class="offset-info">G: (-3, 2) | R: (3, 2)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/tobolsk.jpeg" alt="Tobolsk">
                </div>
                <div class="image-caption">Tobolsk</div>
                <div class="offset-info">G: (3, 3) | R: (6, 3)</div>
            </div>
        </div>

        <h3>High-Resolution Images</h3>
        <div class="image-grid">
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/emir.jpeg" alt="Emir">
                </div>
                <div class="image-caption">Emir of Bukhara</div>
                <div class="offset-info">G: (49, 24) | R: (107, 40)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/church.jpeg" alt="Church">
                </div>
                <div class="image-caption">Church</div>
                <div class="offset-info">G: (25, 4) | R: (58, -4)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/harvesters.jpeg" alt="Harvesters">
                </div>
                <div class="image-caption">Harvesters</div>
                <div class="offset-info">G: (60, 17) | R: (124, 14)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/icon.jpeg" alt="Icon">
                </div>
                <div class="image-caption">Icon</div>
                <div class="offset-info">G: (42, 17) | R: (90, 23)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/self_portrait.jpeg" alt="Self Portrait">
                </div>
                <div class="image-caption">Self Portrait</div>
                <div class="offset-info">G: (78, 29) | R: (176, 37)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/three_generations.jpeg" alt="Three Generations">
                </div>
                <div class="image-caption">Three Generations</div>
                <div class="offset-info">G: (53, 12) | R: (111, 9)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/melons.jpeg" alt="Melons">
                </div>
                <div class="image-caption">Melons</div>
                <div class="offset-info">G: (80, 10) | R: (177, 13)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/italil.jpeg" alt="Italian">
                </div>
                <div class="image-caption">Italian</div>
                <div class="offset-info">G: (38, 22) | R: (77, 36)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/lugano.jpeg" alt="Lugano">
                </div>
                <div class="image-caption">Lugano</div>
                <div class="offset-info">G: (41, -17) | R: (92, -29)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/lastochikino.jpeg" alt="Lastochikino">
                </div>
                <div class="image-caption">Lastochikino</div>
                <div class="offset-info">G: (-3, -2) | R: (76, -8)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/siren.jpeg" alt="Siren">
                </div>
                <div class="image-caption">Siren</div>
                <div class="offset-info">G: (49, -6) | R: (96, -24)</div>
            </div>
        </div>

        <h2 id="additional">Additional Examples from the Collection</h2>
        <p>
            I selected three additional images from the Prokudin-Gorskii collection to test my algorithm.
        </p>
        <div class="image-grid">
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/fav1.jpeg" alt="Favorite 1">
                </div>
                <div class="image-caption">Collection Image 1</div>
                <div class="offset-info">G: (40, 5) | R: (105, 1)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/fav2.jpeg" alt="Favorite 2">
                </div>
                <div class="image-caption">Collection Image 2</div>
                <div class="offset-info">G: (59, 27) | R: (126, 34)</div>
            </div>
            <div class="image-wrapper">
                <div class="image-container">
                    <img src="proj1/fav3.jpeg" alt="Favorite 3">
                </div>
                <div class="image-caption">Collection Image 3</div>
                <div class="offset-info">G: (29, 2) | R: (119, -2)</div>
            </div>
        </div>



        <h2 id="summary">Results Summary</h2>
        <table class="results-table">
            <thead>
                <tr>
                    <th>Image</th>
                    <th>Resolution</th>
                    <th>Green Offset (y, x)</th>
                    <th>Red Offset (y, x)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Cathedral</td>
                    <td>Low</td>
                    <td>(5, 2)</td>
                    <td>(12, 3)</td>
                </tr>
                <tr>
                    <td>Monastery</td>
                    <td>Low</td>
                    <td>(-3, 2)</td>
                    <td>(3, 2)</td>
                </tr>
                <tr>
                    <td>Tobolsk</td>
                    <td>Low</td>
                    <td>(3, 3)</td>
                    <td>(6, 3)</td>
                </tr>
                <tr>
                    <td>Church</td>
                    <td>High</td>
                    <td>(25, 4)</td>
                    <td>(58, -4)</td>
                </tr>
                <tr>
                    <td>Emir</td>
                    <td>High</td>
                    <td>(49, 24)</td>
                    <td>(107, 40)</td>
                </tr>
                <tr>
                    <td>Harvesters</td>
                    <td>High</td>
                    <td>(60, 17)</td>
                    <td>(124, 14)</td>
                </tr>
                <tr>
                    <td>Icon</td>
                    <td>High</td>
                    <td>(42, 17)</td>
                    <td>(90, 23)</td>
                </tr>
                <tr>
                    <td>Italian</td>
                    <td>High</td>
                    <td>(38, 22)</td>
                    <td>(77, 36)</td>
                </tr>
                <tr>
                    <td>Lastochikino</td>
                    <td>High</td>
                    <td>(-3, -2)</td>
                    <td>(76, -8)</td>
                </tr>
                <tr>
                    <td>Lugano</td>
                    <td>High</td>
                    <td>(41, -17)</td>
                    <td>(92, -29)</td>
                </tr>
                <tr>
                    <td>Melons</td>
                    <td>High</td>
                    <td>(80, 10)</td>
                    <td>(177, 13)</td>
                </tr>
                <tr>
                    <td>Self Portrait</td>
                    <td>High</td>
                    <td>(78, 29)</td>
                    <td>(176, 37)</td>
                </tr>
                <tr>
                    <td>Siren</td>
                    <td>High</td>
                    <td>(49, -6)</td>
                    <td>(96, -24)</td>
                </tr>
                <tr>
                    <td>Three Generations</td>
                    <td>High</td>
                    <td>(54, 12)</td>
                    <td>(111, 9)</td>
                </tr>
                <tr>
                    <td>Collection Image 1</td>
                    <td>High</td>
                    <td>(40, 5)</td>
                    <td>(105, 1)</td>
                </tr>
                <tr>
                    <td>Collection Image 2</td>
                    <td>High</td>
                    <td>(59, 28)</td>
                    <td>(126, 34)</td>
                </tr>
                <tr>
                    <td>Collection Image 3</td>
                    <td>High</td>
                    <td>(29, 2)</td>
                    <td>(119, -2)</td>
                </tr>
            </tbody>
        </table>

        <div style="text-align: center; color: #606060; margin-top: 80px; padding: 40px 0; border-top: 1px solid #2a2a2a;">
            © 2025 Sukhamrit Singh. All rights reserved.
        </div>
    </div>
</body>
</html>